{
  "version": 3,
  "sources": ["../src/index.ts"],
  "sourcesContent": ["/** Init */\nconst updatePlayerCount = (n: number) => Array.from(document.querySelectorAll('.player'))\n  .forEach((player, i) => {\n    player.classList.toggle('hidden', i >= n);\n    player.setAttribute('aria-hidden', `${i >= n}`);\n  });\n\nconst updateBaseAuthority = (n: number) => Array.from(document.querySelectorAll('.player > .score > span'))\n  .forEach(score => {\n    score.innerHTML = `${n}`;\n  });\n\nconst update = () => {\n  const inputPlayers = document.querySelector<HTMLInputElement>('header select[name=\"players\"]');\n  const inputAuthority = document.querySelector<HTMLInputElement>('header input[name=\"authority\"]');\n\n  updatePlayerCount(inputPlayers?.value ? parseInt(inputPlayers.value, 10) : 2);\n  updateBaseAuthority(inputAuthority?.value ? parseInt(inputAuthority?.value, 10) : 50);\n};\n\nconst createContext = async (file: string) => {\n  const audioContext = new AudioContext();\n  const source = audioContext.createBufferSource();\n  const audioBuffer = await fetch(`./assets/${file}`)\n    .then(res => res.arrayBuffer())\n    .then(buffer => audioContext.decodeAudioData(buffer));\n\n  source.buffer = audioBuffer;\n  source.connect(audioContext.destination);\n\n  return source;\n};\n\nconst createLifeDown = () => createContext('life_down.wav');\nconst createLifeUp = () => createContext('life_up.wav');\n\nconst debounce = <T extends (...args: any[]) => any>(cb: T, n: number) => {\n  let id: ReturnType<typeof setTimeout>;\n\n  return (...args: Parameters<T>) => new Promise<ReturnType<T>>(resolve => {\n    if (id) clearTimeout(id);\n    id = setTimeout(() => resolve(cb(...args)), n);\n  });\n};\n\n/** Players */\nconst init = async () => {\n  const debouncedLifeDown = debounce(async (score: string) => {\n    const lifeDown = await createLifeDown();\n    lifeDown.start();\n    lifeDown.addEventListener('ended', () => {\n      lifeDown.stop();\n    });\n  }, 1000);\n\n  const debouncedLifeUp = debounce(async (score: string) => {\n    const lifeUp = await createLifeUp();\n    lifeUp.start();\n    lifeUp.addEventListener('ended', () => {\n      lifeUp.stop();\n    });\n  }, 1000);\n\n  Array.from(document.querySelectorAll('.player'))\n    .forEach(player => {\n      const buttonAdd = player.querySelector<HTMLButtonElement>('button.add');\n      const buttonSubtract = player.querySelector<HTMLButtonElement>('button.subtract');\n      const score = player.querySelector<HTMLDivElement>('.score > span');\n\n      buttonAdd?.addEventListener('click', () => {\n        if (score) score.innerText = `${parseInt(score.innerText, 10) + 1}`;\n        if (score?.innerText) debouncedLifeUp(score.innerText);\n      });\n\n      buttonSubtract?.addEventListener('click', () => {\n        if (score) score.innerText = `${parseInt(score.innerText, 10) - 1}`;\n        if (score?.innerText) debouncedLifeDown(score.innerText);\n      });\n    });\n};\n\n/** Reset */\ndocument.querySelector('button.reset')?.addEventListener('click', update);\n\n/** Mirror */\ndocument.querySelector('button.mirror')?.addEventListener('click', () => {\n  document.querySelector('main')?.classList.toggle('mirror');\n});\n\n/** Show / Hide */\ndocument.querySelector('button.focus')?.addEventListener('click', event => {\n  document.querySelector('footer')?.classList.toggle('hidden');\n  (event.currentTarget as HTMLButtonElement).classList.toggle('show');\n  document.querySelector('h1')?.classList.toggle('hidden');\n});\n\ninit();\nupdate();\n\n/** Service Worker */\nif ('serviceWorker' in navigator) {\n  window.addEventListener('load', () => {\n    navigator.serviceWorker\n      .register('/star-realms-authority/service.js')\n      .catch(console.error);\n  });\n}\n"],
  "mappings": "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",
  "names": ["updatePlayerCount", "player", "i", "updateBaseAuthority", "score", "update", "inputPlayers", "inputAuthority", "createContext", "file", "__async", "audioContext", "source", "audioBuffer", "res", "buffer", "createLifeDown", "createLifeUp", "debounce", "cb", "n", "id", "args", "resolve", "init", "debouncedLifeDown", "lifeDown", "debouncedLifeUp", "lifeUp", "buttonAdd", "buttonSubtract", "_a", "event", "_b"]
}
