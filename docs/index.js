"use strict";(()=>{var a=(n,e,t)=>new Promise((r,c)=>{var o=s=>{try{i(t.next(s))}catch(u){c(u)}},L=s=>{try{i(t.throw(s))}catch(u){c(u)}},i=s=>s.done?r(s.value):Promise.resolve(s.value).then(o,L);i((t=t.apply(n,e)).next())});var v=n=>Array.from(document.querySelectorAll(".player")).forEach((e,t)=>{e.classList.toggle("hidden",t>=n),e.setAttribute("aria-hidden",`${t>=n}`)}),g=n=>Array.from(document.querySelectorAll(".player > .score > span")).forEach(e=>{e.innerHTML=`${n}`}),y=()=>{let n=document.querySelector('header select[name="players"]'),e=document.querySelector('header input[name="authority"]');v(n!=null&&n.value?parseInt(n.value,10):2),g(e!=null&&e.value?parseInt(e==null?void 0:e.value,10):50)},T=n=>a(void 0,null,function*(){let e=new AudioContext,t=e.createBufferSource(),r=yield fetch(`./assets/${n}`).then(c=>c.arrayBuffer()).then(c=>e.decodeAudioData(c));return t.buffer=r,t.connect(e.destination),t}),p=()=>T("life_down.wav"),E=()=>T("life_up.wav"),d=(n,e)=>{let t;return(...r)=>new Promise(c=>{t&&clearTimeout(t),t=setTimeout(()=>c(n(...r)),e)})},h=()=>a(void 0,null,function*(){let n=d(t=>a(void 0,null,function*(){let r=yield p();r.start(),r.addEventListener("ended",()=>{r.stop()})}),1e3),e=d(t=>a(void 0,null,function*(){let r=yield E();r.start(),r.addEventListener("ended",()=>{r.stop()})}),1e3);Array.from(document.querySelectorAll(".player")).forEach(t=>{let r=t.querySelector("button.add"),c=t.querySelector("button.subtract"),o=t.querySelector(".score > span");r==null||r.addEventListener("click",()=>{o&&(o.innerText=`${parseInt(o.innerText,10)+1}`),o!=null&&o.innerText&&e(o.innerText)}),c==null||c.addEventListener("click",()=>{o&&(o.innerText=`${parseInt(o.innerText,10)-1}`),o!=null&&o.innerText&&n(o.innerText)})})}),l;(l=document.querySelector("button.reset"))==null||l.addEventListener("click",y);var m;(m=document.querySelector("button.mirror"))==null||m.addEventListener("click",()=>{var n;(n=document.querySelector("main"))==null||n.classList.toggle("mirror")});var f;(f=document.querySelector("button.focus"))==null||f.addEventListener("click",n=>{var e,t;(e=document.querySelector("footer"))==null||e.classList.toggle("hidden"),n.currentTarget.classList.toggle("show"),(t=document.querySelector("h1"))==null||t.classList.toggle("hidden")});h();y();"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/star-realms-authority/service.js").catch(console.error)});})();
//# sourceMappingURL=index.js.map
