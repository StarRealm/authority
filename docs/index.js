"use strict";(()=>{var i=(t,e,n)=>new Promise((s,r)=>{var a=c=>{try{u(n.next(c))}catch(d){r(d)}},o=c=>{try{u(n.throw(c))}catch(d){r(d)}},u=c=>c.done?s(c.value):Promise.resolve(c.value).then(a,o);u((n=n.apply(t,e)).next())});var p=t=>Array.from(document.querySelectorAll(".player")).forEach((e,n)=>{e.classList.toggle("hidden",n>=t),e.setAttribute("aria-hidden",`${n>=t}`)}),v=t=>Array.from(document.querySelectorAll(".player > .score > span")).forEach(e=>{e.innerHTML=`${t}`}),T=()=>{let t=document.querySelector('header select[name="players"]'),e=document.querySelector('header input[name="authority"]');p(t!=null&&t.value?parseInt(t.value,10):2),v(e!=null&&e.value?parseInt(e==null?void 0:e.value,10):50)},L=t=>i(void 0,null,function*(){let e=new AudioContext,n=e.createBufferSource(),s=yield fetch(`./assets/${t}`).then(r=>r.arrayBuffer()).then(r=>e.decodeAudioData(r));return n.buffer=s,n.connect(e.destination),n}),g=()=>L("life_down.wav"),h=()=>L("life_up.wav"),l=(t,e)=>{let n;return(...s)=>new Promise(r=>{n&&clearTimeout(n),n=setTimeout(()=>r(t(...s)),e)})},E=()=>i(void 0,null,function*(){let t=s=>speechSynthesis.speak(new SpeechSynthesisUtterance(s)),e=l(s=>i(void 0,null,function*(){let r=yield g();r.start(),r.addEventListener("ended",()=>{r.stop(),t(s)})}),1e3),n=l(s=>i(void 0,null,function*(){let r=yield h();r.start(),r.addEventListener("ended",()=>{r.stop(),t(s)})}),1e3);Array.from(document.querySelectorAll(".player")).forEach(s=>{let r=s.querySelector("button.add"),a=s.querySelector("button.subtract"),o=s.querySelector(".score > span");r==null||r.addEventListener("click",()=>{o&&(o.innerText=`${parseInt(o.innerText,10)+1}`),o!=null&&o.innerText&&n(o.innerText)}),a==null||a.addEventListener("click",()=>{o&&(o.innerText=`${parseInt(o.innerText,10)-1}`),o!=null&&o.innerText&&e(o.innerText)})})}),m;(m=document.querySelector("button.reset"))==null||m.addEventListener("click",T);var f;(f=document.querySelector("button.mirror"))==null||f.addEventListener("click",()=>{var t;(t=document.querySelector("main"))==null||t.classList.toggle("mirror")});var y;(y=document.querySelector("button.focus"))==null||y.addEventListener("click",t=>{var e,n;(e=document.querySelector("footer"))==null||e.classList.toggle("hidden"),t.currentTarget.classList.toggle("show"),(n=document.querySelector("h1"))==null||n.classList.toggle("hidden")});E();T();"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/star-realms-authority/service.js").catch(console.error)});})();
//# sourceMappingURL=index.js.map
