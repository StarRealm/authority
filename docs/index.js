"use strict";(()=>{var i=(n,e,r)=>new Promise((a,t)=>{var c=s=>{try{u(r.next(s))}catch(d){t(d)}},o=s=>{try{u(r.throw(s))}catch(d){t(d)}},u=s=>s.done?a(s.value):Promise.resolve(s.value).then(c,o);u((r=r.apply(n,e)).next())});var T=n=>Array.from(document.querySelectorAll(".player")).forEach((e,r)=>{e.classList.toggle("hidden",r>=n),e.setAttribute("aria-hidden",`${r>=n}`)}),p=n=>Array.from(document.querySelectorAll(".player > .score > span")).forEach(e=>{e.innerHTML=`${n}`}),m=()=>{let n=document.querySelector('header select[name="players"]'),e=document.querySelector('header input[name="authority"]');T(n!=null&&n.value?parseInt(n.value,10):2),p(e!=null&&e.value?parseInt(e==null?void 0:e.value,10):50)},y=n=>i(void 0,null,function*(){let e=new AudioContext,r=e.createBufferSource(),a=yield fetch(`./assets/${n}`).then(t=>t.arrayBuffer()).then(t=>e.decodeAudioData(t));return r.buffer=a,r.connect(e.destination),r}),v=()=>y("life_down.wav"),L=()=>y("life_up.wav"),l=(n,e)=>{let r;return(...a)=>new Promise(t=>{r&&clearTimeout(r),r=setTimeout(()=>t(n(...a)),e)})},f;(f=document.querySelector("header > button.reset"))==null||f.addEventListener("click",m);var h=()=>i(void 0,null,function*(){let n=a=>speechSynthesis.speak(new SpeechSynthesisUtterance(a)),e=l(a=>i(void 0,null,function*(){let t=yield v();t.start(),t.addEventListener("ended",()=>{t.stop(),n(a)})}),1e3),r=l(a=>i(void 0,null,function*(){let t=yield L();t.start(),t.addEventListener("ended",()=>{t.stop(),n(a)})}),1e3);Array.from(document.querySelectorAll(".player")).forEach(a=>{let t=a.querySelector("button.add"),c=a.querySelector("button.subtract"),o=a.querySelector(".score > span");t==null||t.addEventListener("click",()=>{o&&(o.innerText=`${parseInt(o.innerText,10)+1}`),o!=null&&o.innerText&&r(o.innerText)}),c==null||c.addEventListener("click",()=>{o&&(o.innerText=`${parseInt(o.innerText,10)-1}`),o!=null&&o.innerText&&e(o.innerText)})})});h();m();"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/star-realms-authority/service.js").catch(console.error)});})();
//# sourceMappingURL=index.js.map
